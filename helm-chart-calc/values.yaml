frontend:
  replicaCount: 2
  ingress:
    enabled: true
    className: alb
    annotations:
      kubernetes.io/ingress.class: alb
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/ssl-redirect: '443'
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
      external-dns.alpha.kubernetes.io/hostname: calculator.deifops.click
    hosts:
      - host: calculator.deifops.click
        paths:
          - path: /
            pathType: Prefix
    tls: []
  image:
    repository: deifops/calc-frontend
    pullPolicy: IfNotPresent
    tag: 1.20.0
  imagePullSecrets: []
  service:
    type: NodePort
    port: 80
  env:
    - name: SERVER_NAME
      value: calculator.deifops.click
    - name: BACKEND_HOST
      value: deifops-backend
    - name: BACKEND_PORT
      value: '5000'
  nameOverride: ''
  fullnameOverride: deifops-frontend
  livenessProbe:
    httpGet:
      path: /healz/
      port: 80
  readinessProbe:
    httpGet:
      path: /probe/
      port: 80
backend:
  replicaCount: 2
  image:
    repository: deifops/calc-backend
    pullPolicy: IfNotPresent
    tag: 1.16.0
  imagePullSecrets: []
  nameOverride: ''
  fullnameOverride: deifops-backend
  service:
    type: ClusterIP
    port: 5000
  livenessProbe:
    httpGet:
      path: /
      port: 5000
  readinessProbe:
    httpGet:
      path: /
      port: 5000
  env:
    - name: MYSQL_HOST
      value: deifops-mysql-headless
    - name: MYSQL_USER
      value: calc_user
    - name: MYSQL_PASSWORD
      valueFrom:
        secretKeyRef:
          name: mysql-secret
          key: mysql-password
    - name: MYSQL_DB
      value: calc_db
    - name: ALLOWED_ORIGINS
      value: 'https://calculator.deifops.click'
mysql:
  fullname: ''
  fullnameOverride: deifops-mysql
  architecture: replication
  auth:
    rootPassword: ''
    createDatabase: true
    database: calc_db
    username: calc_user
    password: ''
    replicationUser: 'replicator'
    replicationPassword: ''
    existingSecret: mysql-secret
  primary:
    name: primary
    persistence:
      enabled: true
      existingClaim: ''
      storageClass: standard
      accessModes:
        - ReadWriteOnce
      size: 8Gi
      selector: {}
  secondary:
    name: secondary
    replicaCount: 1
    persistence:
      enabled: true
      existingClaim: ''
      storageClass: standard
      accessModes:
        - ReadWriteOnce
      size: 8Gi
      selector: {}
